# Отчет по лабораторной работе 6

## Тема
Анализ продаж: чтение CSV, агрегация метрик и сохранение итогов в JSON.

## Постановка задачи
1. Подготовить исходный CSV-файл `sales.csv` со столбцами `date`, `product_name`, `quantity`, `price_per_unit`.
2. Считать данные и вычислить для каждой строки выручку (`quantity * price_per_unit`).
3. Найти:
   - товар с наибольшим количеством проданных единиц;
   - товар с наибольшей суммарной выручкой.
4. Сохранить сводку анализа в JSON-файл `sales_summary.json`.

## Структура проекта
- `sales.csv` — входные данные с продажами.
- `main.py` — скрипт анализа.
- `sales_summary.json` — результирующий файл с итоговыми метриками.

## Описание реализации

### Файл `sales.csv`
Содержит 10 строк с примерами продаж гаджетов. Для каждой записи указаны дата, название товара, количество и цена за единицу.

```
date,product_name,quantity,price_per_unit
2025-11-01,Wireless Mouse,35,25.99
...
2025-11-05,Smartwatch,15,199.00
```

### Скрипт `main.py`
```python
rows = read_sales(SALES_CSV)
summary = analyze_sales(rows)
save_summary(summary, SUMMARY_JSON)
print(f"Анализ завершен. Результаты сохранены в {SUMMARY_JSON.name}")
```

- **`read_sales`** использует `csv.DictReader`, чтобы получить список словарей. Добавлена проверка на существование файла.
- **`analyze_sales`** конвертирует количество и цену в числа, подсчитывает выручку по каждой записи, суммирует общую выручку, а также агрегирует показатели по товарам (количество и выручка). 
- Выбор топовых товаров делается через `max` с лямбда-функциями по количеству и выручке.
- **`save_summary`** сериализует словарь со сводкой в JSON с `indent=4` и `ensure_ascii=False`.

### Файл `sales_summary.json`
```json
{
    "total_revenue": 18444.95,
    "top_selling_product": {
        "name": "Wireless Mouse",
        "quantity": 35
    },
    "most_profitable_product": {
        "name": "Gaming Monitor",
        "revenue": 2990.0
    }
}
```

## Вывод
Программа автоматически обрабатывает CSV-данные, вычисляет ключевые метрики продаж и сохраняет результирующую сводку в удобном JSON-формате.

